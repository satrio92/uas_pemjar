<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script src="https://cdn.tailwindcss.com"></script>
	<title>Document</title>
</head>
<body class="flex flex-col items-center h-screen">
	<h1 class="text-4xl font-bold my-10">WORDLLE</h1>
	<div class="flex flex-col justify-center items-center h-[calc(100%-120px)] gap-16">
		<div class="flex gap-4">
			<div class="w-16 h-16 border-2 rounded-md border-gray-600 flex justify-center items-center text-3xl font-semibold hover:w-[68px] hover:h-[68px] hover:text-[34px] hover:shadow-md cursor-pointer transition-all duration-300 ease-in-out box">
				<input type="text" maxlength="1" autofocus class="input outline-none max-w-[32px] text-3xl text-center" onkeyup="nextCol()">
			</div>
			<div class="w-16 h-16 border-2 rounded-md border-gray-600 flex justify-center items-center text-3xl font-semibold hover:w-[68px] hover:h-[68px] hover:text-[34px] hover:shadow-md cursor-pointer transition-all duration-300 ease-in-out box">
				<input type="text" maxlength="1" class="input outline-none max-w-[32px] text-3xl text-center" onkeyup="nextCol()">
			</div>
			<div class="w-16 h-16 border-2 rounded-md border-gray-600 flex justify-center items-center text-3xl font-semibold hover:w-[68px] hover:h-[68px] hover:text-[34px] hover:shadow-md cursor-pointer transition-all duration-300 ease-in-out box">
				<input type="text" maxlength="1" class="input outline-none max-w-[32px] text-3xl text-center" onkeyup="nextCol()">
			</div>
			<div class="w-16 h-16 border-2 rounded-md border-gray-600 flex justify-center items-center text-3xl font-semibold hover:w-[68px] hover:h-[68px] hover:text-[34px] hover:shadow-md cursor-pointer transition-all duration-300 ease-in-out box">
				<input type="text" maxlength="1" class="input outline-none max-w-[32px] text-3xl text-center" onkeyup="nextCol()">
			</div>
			<div class="w-16 h-16 border-2 rounded-md border-gray-600 flex justify-center items-center text-3xl font-semibold hover:w-[68px] hover:h-[68px] hover:text-[34px] hover:shadow-md cursor-pointer transition-all duration-300 ease-in-out box">
				<input type="text" maxlength="1" class="input outline-none max-w-[32px] text-3xl text-center" onkeyup="nextCol()">
			</div>
			<div class="w-16 h-16 border-2 rounded-md border-gray-600 flex justify-center items-center text-3xl font-semibold hover:w-[68px] hover:h-[68px] hover:text-[34px] hover:shadow-md cursor-pointer transition-all duration-300 ease-in-out box">
				<input type="text" maxlength="1" class="input outline-none max-w-[32px] text-3xl text-center" onkeyup="nextCol()">
			</div>
			<div class="w-16 h-16 border-2 rounded-md border-gray-600 flex justify-center items-center text-3xl font-semibold hover:w-[68px] hover:h-[68px] hover:text-[34px] hover:shadow-md cursor-pointer transition-all duration-300 ease-in-out box">
				<input type="text" maxlength="1" class="input outline-none max-w-[32px] text-3xl text-center" onkeyup="nextCol()">
			</div>
		</div>
		<div class="w-[600px] text-center font-medium">Lorem ipsum dolor, sit amet consectetur adipisicing elit. Deserunt dolor quasi necessitatibus beatae, perferendis soluta, ea at reiciendis aliquam earum provident eius, saepe deleniti similique adipisci ad qui consequuntur eos.</div>
	</div>

	<script>
		const socket = new WebSocket('ws://localhost:8005');
		// window.addEventListener('load', () => {
		// 	socket.addEventListener('open', (event) => {
		// 		console.log(event)
		// 		socket.send('play');
		// 	});

		// 	socket.addEventListener('message', (event) => {
		// 		console.log('Message from server ', event.data);
		// 	});

		// 	socket.addEventListener('error', (event) => {
		// 		console.log('Conn Error', event);
		// 	});

		// 	socket.addEventListener('close', (event) => {
		// 		console.log('Connection close', event);
		// 	});
		// })

		// socket.onopen = function () {
		// 	// socket.send({'type': 'play'}); // this works
		// 	alert("Connection opened...");
		// };
		
		
		socket.addEventListener('message', (event) => {
			console.log(event.data);
		});
		
		const msg = JSON.parse('{"type": "play"}')

		socket.addEventListener('open', (event) => {
			console.log(event)
			socket.send(msg)
		})
		
		// console.log(msg)
		// socket.onopen = () => socket.send(msg); // this works
		
		socket.addEventListener('message', (event) => {
			console.log(event.data);
		});

		
		document.querySelector(".input").focus()
		let i = 0
		const alphabet = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z']
		const jawaban = ['T', 'U', 'L', 'I', 'S', 'A', 'N']

		function checkJawaban() {
			let inp  = document.querySelectorAll(".input")
			for (let i = 0; i < inp.length; i++) {
				if (inp[i].value != jawaban[i]) {
					return alert('Jawaban Salah')
				}	
			}
			alert('Jawaban Benar')
		}
		
		function nextCol() {
			let keynum = event.key
			if(alphabet.includes(keynum)) {
				let input  = document.querySelectorAll(".input")
				if (i == (jawaban.length-1)) {
					checkJawaban()
				} else if (input[i].value.length == 1) {
					input[i].blur()
					input[i+1].focus()
					i++
				}
			}
		}
	</script>
</body>
</html>